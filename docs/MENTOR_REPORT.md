# 山东麻将 AI 助手 - 导师汇报文档

## 1. 项目目标

构建一个可演示、可交互、可扩展的山东麻将辅助系统，用于：

- 新手规则教学与策略入门
- 牌局过程中的实时决策辅助
- 后续机器学习实验的数据与规则基线

## 2. 已完成内容

1. 前端交互系统（`app/`）
- 新手训练模块（10 课）
- 三阶段牌局流程（摸牌 -> 打牌 -> 等待）
- 风险与策略面板（推荐舍牌、风险等级、动作提示）
- LLM 策略解释与 Chat 交互

2. Python 规则与实验系统（`mahjong-ai/`）
- 基础规则引擎（胡牌/碰杠等判定）
- 扩展引擎与策略脚本
- 自对弈数据生成器
- 参数搜索脚本（risk_tolerance 调优）

## 3. 技术方案

- 前端：React 19 + TypeScript + Vite + Tailwind + shadcn/ui
- 算法：Python 规则引擎 + 启发式风险评估
- LLM：OpenAI 风格 `chat/completions`，使用系统提示词约束 JSON 输出

## 4. 可复现实验与验证

在 2026-02-28 的本地验证结果：

- `npm run build`（`app/`）通过
- `python -m py_compile ...`（`mahjong-ai/` 核心脚本）通过
- `python self_play_training.py --help` 可正常运行

## 5. 工程亮点

- 规则可解释：决策逻辑可追踪，便于教学和调试
- 前后端分层：交互产品与规则实验相互独立，可并行迭代
- 输出约束：LLM 结果结构化，降低自由生成带来的不稳定性

## 6. 当前不足

- 规则默认集中在 108 张（万/筒/条），未默认开启字牌全量模式
- 目前缺少统一 Benchmark 与对照实验框架
- 对手建模仍以启发式规则为主，学习型策略有待加强

## 7. 下一阶段计划

1. 建立标准化评估脚本（固定随机种子、对照组、统计指标）
2. 补充自动化测试（规则边界、胡牌判定、流程回归）
3. 引入数据驱动模块（监督学习或强化学习）并与规则策略做 AB 对比

