# 山东麻将AI助手 - 完整系统

## 🎮 在线使用

**Web界面**: https://ccyoblbx2die2.ok.kimi.link

## 📚 功能介绍

### 1. 新手教程（可视化互动）

专为新手设计的9课互动教程：

| 课程 | 内容 | 互动 |
|------|------|------|
| 第1课 | 山东麻将特色规则 | 阅读 |
| 第2课 | 认识34种麻将牌 | 浏览 |
| 第3课 | 顺子、刻子、对子 | 示例 |
| 第4课 | **互动练习：找出顺子** | ✅ 点击选择 |
| 第5课 | 向听数概念 | 分析 |
| 第6课 | AI出牌三大原则 | 阅读 |
| 第7课 | **互动练习：选择最佳出牌** | ✅ 点击选择 |
| 第8课 | 危险度评估 | 识别 |
| 第9课 | 完成教程 | 总结 |

### 2. AI辅助决策

输入牌局信息，获取AI建议：
- 我的手牌（点击添加）
- 本局财神
- 对手出牌记录

**AI分析内容**：
- 🎯 推荐出牌（大字突出显示）
- 📊 当前状态（手牌数、向听数、是否听牌）
- 👁️ 听牌分析（可胡牌数、剩余张数）
- ⚠️ 危险评估（风险等级、对手听牌警告）
- 👥 对手分析（碰杠数、可能牌型）
- 📈 牌价值分析（每张牌的价值评分）
- 💡 动作建议（优先级排序）

### 3. AI对战演示

观看4个AI自动对战，学习AI决策过程。

### 4. 数据管理 & 模型训练

#### 生成数据
- 生成100局 / 1000局 / 10000局
- AI自我对弈，自动记录详细数据

#### 导入数据
- 支持 JSON 格式
- 兼容天凤/雀魂等平台格式
- 拖拽上传

#### 训练模型
- 实时显示训练进度
- 损失值、准确率曲线
- 保存/导出模型

### 5. 策略指南

详细的策略文档：
- 概率论策略
- 博弈论策略
- 出牌策略
- 防守策略
- 碰杠决策
- 听牌技巧

### 6. AI原理

解释AI的三大理论基础：
- 概率论应用
- 博弈论应用
- 贝叶斯推断

---

## 💻 本地运行

### 1. 运行Web界面

```bash
cd /mnt/okcomputer/output/app
npm install
npm run dev
```

### 2. 生成训练数据（Python）

```bash
cd /mnt/okcomputer/output/mahjong-ai

# 生成1000局数据
python3 self_play_training.py -n 1000

# 生成10000局数据，每1000局保存检查点
python3 self_play_training.py -n 10000 -i 1000

# 查看帮助
python3 self_play_training.py --help
```

### 3. 测试AI算法

```bash
# 测试基础AI
python3 mahjong_game.py

# 测试高级AI
python3 advanced_ai.py

# 测试完整引擎+AI辅助
python3 mahjong_complete.py
```

---

## 📊 数据格式

### 训练数据格式（JSON）

```json
{
  "game_id": "game_20240115_103000_0",
  "timestamp": "2024-01-15T10:30:00",
  "magic_card": "5万",
  "initial_hands": [
    ["1万", "2万", "3万", ...],
    ["4筒", "5筒", "6筒", ...],
    ...
  ],
  "actions": [
    {
      "turn": 0,
      "player": 0,
      "action": "discard",
      "card": "1万",
      "state_before": {
        "hand": ["1万", "2万", ...],
        "discards": [],
        "wall_count": 68
      },
      "ai_decision": {
        "recommended": "1万",
        "reason": "孤张牌",
        "xiang_ting": 2
      }
    }
  ],
  "result": {
    "winner": 0,
    "win_type": "自摸",
    "turns": 45
  }
}
```

---

## 🎯 使用建议

### 新手入门路线

```
1. 打开 Web界面
   ↓
2. 完成【新手教程】（9课，约15分钟）
   ↓
3. 使用【AI辅助决策】实战练习
   ↓
4. 查看【策略指南】深入学习
   ↓
5. 观看【AI对战演示】学习高级技巧
```

### 进阶提升路线

```
1. 生成训练数据（Python脚本）
   ↓
2. 导入到【数据管理】
   ↓
3. 训练模型优化AI
   ↓
4. 导出模型用于实战
```

---

## 📁 文件说明

| 文件 | 说明 |
|------|------|
| `mahjong_game.py` | 基础麻将引擎 |
| `advanced_ai.py` | 高级AI算法 |
| `mahjong_complete.py` | 完整引擎+AI辅助 |
| `self_play_training.py` | 自我对弈数据生成 |
| `strategy_guide.md` | 策略文档 |
| `data_training_guide.md` | 数据获取指南 |
| `ml_analysis.md` | 机器学习分析 |

---

## 🔧 技术栈

- **前端**: React + TypeScript + Tailwind CSS + shadcn/ui
- **AI算法**: Python + 概率论/博弈论/贝叶斯推断
- **数据格式**: JSON

---

## 📈 预期效果

| 指标 | 数值 |
|------|------|
| AI胜率 | 30-35% |
| 胡牌率 | 60-70% |
| 平均听牌回合 | 12-15 |
| 点炮率 | <5% |

---

## 📝 更新日志

### v2.0 (最新)
- ✅ 新增新手教程系统（9课互动）
- ✅ 新增数据管理功能
- ✅ 新增模型训练功能
- ✅ 优化AI辅助界面
- ✅ 默认进入新手教程

### v1.0
- ✅ AI辅助决策
- ✅ AI对战演示
- ✅ 策略指南
- ✅ AI原理解释

---

## 🤝 贡献

欢迎提交Issue和PR！

---

## 📄 许可证

MIT License
